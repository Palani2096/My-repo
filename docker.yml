---
- name Install Docker on RHEL 8
  hosts all
  become yes

  tasks
    - name Ensure yum-utils is installed
      yum
        name yum-utils
        state present

    - name Add Docker CE repository
      command yum-config-manager --add-repo httpsdownload.docker.comlinuxcentosdocker-ce.repo
      args
        creates etcyum.repos.ddocker-ce.repo

    - name Install Docker packages
      yum
        name
          - docker-ce
          - docker-ce-cli
          - containerd.io
        state present

    - name Enable and start Docker service
      systemd
        name docker
        enabled yes
        state started